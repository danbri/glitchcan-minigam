<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fir.sta Text Adventure</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        body { font-family: 'Press Start 2P', monospace; background-color: #000; color: #fff; margin: 0; padding: 20px; }
        #game-container { background-color: #1E1E1E; padding: 20px; border: 2px solid #fff; max-width: 800px; margin: auto; min-height: 400px; overflow-y: auto; }
        #choices-container { margin-top: 20px; }
        .choice-button { display: block; width: 100%; margin: 10px 0; padding: 10px; background-color: #FFCC00; color: #000; border: none; border-radius: 5px; cursor: pointer; text-align: left; font-size: 14px; }
        .choice-button:hover { background-color: #FFDD33; }
        .dollar-sign { color: yellow; font-weight: bold; }
        .red-text { color: red; }
        .reverse-text { background-color: white; color: black; }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="frame-content"></div>
        <div id="choices-container"></div>
    </div>
    <script>
        const framesData = {
            "frames": [
                {
                    "id": 1,
                    "text": "YOU ARE IN THE MIDDLE OF A PLEASANT DREAM ABOUT YOUR SUMMER HOLIDAYS WHEN YOU SUDDENLY COME TO CONSCIOUSNESS.\n\nSOME STRANGE SOUND HAS DISTURBED YOUR SLEEP.\n\nPRESS THE CALL BUTTON TO CONTINUE.",
                    "choices": [
                        { "text": "Call the internal telephone", "target": 2 },
                        { "text": "Stay in bed", "target": 3 }
                    ]
                },
                {
                    "id": 2,
                    "text": "YOU DECIDE TO CALL THE INTERNAL TELEPHONE.\n\nDialing...\n\nBut the line is busy.",
                    "choices": [
                        { "text": "Try again", "target": 4 },
                        { "text": "Look around the room", "target": 5 }
                    ]
                },
                {
                    "id": 3,
                    "text": "YOU CHOOSE TO STAY IN BED.\n\nTime passes and the sounds grow louder.",
                    "choices": [
                        { "text": "Get up and investigate", "target": 6 },
                        { "text": "Ignore the sounds", "target": 7 }
                    ]
                },
                {
                    "id": 4,
                    "text": "YOU TRY CALLING AGAIN.\n\nStill no response.",
                    "choices": [
                        { "text": "Look around the room", "target": 5 }
                    ]
                },
                {
                    "id": 5,
                    "text": "YOU LOOK AROUND THE ROOM.\n\nYou find a flashlight under the pillow.",
                    "choices": [
                        { "text": "Take the flashlight", "target": 8 },
                        { "text": "Leave it", "target": 9 }
                    ]
                },
                {
                    "id": 6,
                    "text": "YOU GET UP TO INVESTIGATE THE SOUNDS.\n\nAs you move towards the door, the sounds intensify.",
                    "choices": [
                        { "text": "Open the door cautiously", "target": 10 },
                        { "text": "Run back to bed", "target": 11 }
                    ]
                },
                {
                    "id": 7,
                    "text": "YOU DECIDE TO IGNORE THE SOUNDS.\n\nBut the noises become unbearable.",
                    "choices": [
                        { "text": "Get up to investigate", "target": 12 },
                        { "text": "Continue ignoring", "target": 13 }
                    ]
                },
                {
                    "id": 8,
                    "text": "YOU TAKE THE FLASHLIGHT.\n\nThe room is dimly lit, but you can see the hallway.",
                    "choices": [
                        { "text": "Proceed to the hallway", "target": 14 },
                        { "text": "Search the room further", "target": 15 }
                    ]
                },
                {
                    "id": 9,
                    "text": "YOU LEAVE THE FLASHLIGHT.\n\nRemaining in the dark, you feel uneasy.",
                    "choices": [
                        { "text": "Get up to investigate", "target": 16 },
                        { "text": "Try to ignore the feelings", "target": 17 }
                    ]
                },
                // ... (Continue adding all frames up to id 220)
                {
                    "id": 500,
                    "text": "YOU ARE DEAD BECAUSE YOU TOOK THE WRONG COURSE OF ACTION IN A FAST MOVING EMERGENCY.\n\nWOULD YOU LIKE TO BE REINCARNATED AND TRY AGAIN?",
                    "choices": [
                        { "text": "Yes", "target": 1 },
                        { "text": "No", "target": 501 }
                    ]
                },
                {
                    "id": 501,
                    "text": "Thank you for playing Fir.sta! Restart the game to try again.",
                    "choices": [
                        { "text": "Restart", "target": 1 }
                    ]
                }
            ]
        };
        let currentFrame = 1;
        function showFrame(frameNumber) {
            const frame = framesData.frames.find(f => f.id === frameNumber);
            if (!frame) { document.getElementById('frame-content').innerText = "Frame not found."; return; }
            document.getElementById('frame-content').innerHTML = formatText(frame.text);
            const choicesContainer = document.getElementById('choices-container');
            choicesContainer.innerHTML = '';
            if (frame.choices && frame.choices.length > 0) {
                frame.choices.forEach(choice => {
                    const btn = document.createElement('button');
                    btn.className = 'choice-button';
                    btn.innerText = choice.text;
                    btn.onclick = () => navigateTo(choice.target);
                    choicesContainer.appendChild(btn);
                });
            } else {
                choicesContainer.innerHTML = "<p>The End.</p>";
            }
            document.getElementById('game-container').scrollTop = 0;
        }
        function navigateTo(frameNumber) {
            if (frameNumber === null) { alert("Thank you for playing Fir.sta!"); return; }
            currentFrame = frameNumber;
            showFrame(currentFrame);
        }
        function formatText(text) {
            let formatted = text.replace(/\n/g, '<br/>')
                                .replace(/\[RED\](.*?)\[\/RED\]/g, '<span class="red-text">$1</span>')
                                .replace(/\[REVERSE\](.*?)\[\/REVERSE\]/g, '<span class="reverse-text">$1</span>')
                                .replace(/\$(.*?)\$/g, '<span class="dollar-sign">$1</span>');
            return formatted;
        }
        window.onload = () => showFrame(currentFrame);
    </script>
</body>
</html>
